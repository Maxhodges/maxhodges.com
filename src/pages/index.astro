---
import { Picture } from "astro:assets";
import { getCollection } from "astro:content";
import SiteLayout from "../layouts/SiteLayout.astro";

const galleries = (await getCollection("galleries"))
  .filter((gallery) => gallery.data.visible !== false)
  .sort((a, b) => a.data.order - b.data.order);
---

<SiteLayout title="Max Hodges — Photography" breadcrumb="Home / Galleries">
  <section class="grid gap-6">
    <div class="rounded-3xl border border-white/10 bg-black/40 p-6 sm:p-8">
      <div class="flex flex-wrap items-center justify-between gap-6">
        <div>
          <div class="text-xs uppercase tracking-[0.3em] text-[color:var(--sea)]">
            New
          </div>
          <div class="mt-3 font-[var(--font-display)] text-3xl">
            Blog
          </div>
          <p class="mt-3 max-w-xl text-sm text-white/70">
            Notes, interviews, and conversations about image-making, culture,
            and the tools that shape them.
          </p>
        </div>
        <a
          href="/blog"
          class="rounded-full border border-[color:var(--rust)] px-6 py-3 text-xs uppercase tracking-[0.3em] text-[color:var(--rust)] transition hover:bg-[color:var(--rust)] hover:text-[#120f0b]"
        >
          Read the blog
        </a>
      </div>
    </div>

    <!-- Kṣaṇa 刹那 -->
    <div class="grid gap-6 md:grid-cols-2 xl:grid-cols-3">
      {
        galleries.map((gallery) => (
          <a
            href={`/gallery/${gallery.id}`}
            class="group relative overflow-hidden rounded-3xl border border-white/10 bg-black/30 shadow-[0_20px_60px_rgba(0,0,0,0.45)] transition hover:-translate-y-1 hover:shadow-[0_30px_70px_rgba(0,0,0,0.6)]"
          >
            <div class="aspect-[4/5] overflow-hidden">
              <Picture
                src={gallery.data.coverImage}
                alt={`Cover image for ${gallery.data.title}`}
                widths={[480, 960, 1440]}
                formats={["webp", "jpeg"]}
                sizes="(max-width: 768px) 92vw, (max-width: 1200px) 45vw, 30vw"
                pictureAttributes={{ class: "h-full w-full block" }}
                class="h-full w-full object-cover transition duration-500 group-hover:scale-[1.03]"
                loading="lazy"
              />
            </div>
            <div class="flex items-center justify-between gap-4 bg-[#141311] px-6 py-5 text-[color:var(--ink)]">
              <div class="font-[var(--font-display)] text-xl">
                {gallery.data.title}
              </div>
              {/* <div class="text-xs uppercase tracking-[0.3em] text-[color:var(--rust)]">
                View
              </div> */}
            </div>
          </a>
        ))
      }
    </div>
  </section>
</SiteLayout>
